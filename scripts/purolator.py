from bs4 import BeautifulSoup
from crossfilter.common.util import get, post, format_brand


def getFilter(filternumber, brand, full=False):
    brand_names, filternumber = format_brand('purolator',
                                             brand,
                                             filternumber)
    address = 'http://ca-en.purolatorautofilters.net/enen/ca/resources/Pages' \
              '/InterchangeGuideResults.aspx?partnr=%s&page=1' % filternumber
    new_address = 'http://www.pureoil.com/purolator_lookup_professional/FilterFinderSearch.aspx'

    content = get(address)
    soup = BeautifulSoup(content, 'html.parser')

    table = soup.find(id='results')
    if not table:
        return ''

    def format_string(string):
        s = string.strip(' Availability limited to existing inventory.')
        s = s.strip(' May not be a direct cross - check applications catalog.')
        return s

    rows = table.find_all('tr')
    purolators = set()
    for row in rows:
        cells = row.find_all(class_='interchangeguidecolumn')
        if cells:
            _brand = cells[0].getText()
            _number = cells[1].getText().replace('-', '')
            purolator_match = cells[2].getText()
            fType = cells[3].getText()
            if full:
                print _brand, _number, purolator_match, fType
            if _brand in brand_names and fType.lower() == 'oil' \
                and _number.upper() == filternumber.upper():
                purolators.add(format_string(purolator_match))
    return ','.join(purolators)


# vals = 'ScriptManager1=UpdatePanelMainSearch%7CButtonMainSearch&__EVENTTARGET=&__EVENTARGUMENT=&WindowPartDetail_HIDDENFIELD=%2FwEPDxYCHh5TRl9FbmFibGVyQ2FsbGJhY2tDb250cm9sU3RhdGUFCC93RVhBQT09ZBYCAgIPZBYCAgEPFCsABQ8WCh4KRGF0YVNvdXJjZWQeDVNMVGFibGVTb3VyY2UXAB4NU291cmNlTGlzdFNldAUgWTJCa1lHRDREd1FnR2dUWVFRd21KaWdQUkROeEF3QT0eBkhlaWdodBsAAAAAAABZQAcAAAAeBF8hU0ICgAFkBf8CPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTE2Ij8%2BPEdyaWRHcm91cGluZ0xvb2tBbmRGZWVsIHhtbG5zOnhzZD0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiPjxBcHBlYXJhbmNlPjxBbnlIZWFkZXJDZWxsPjxJbnRlcmlvcj5Tb2xpZDsgV2hpdGU8L0ludGVyaW9yPjxUZXh0Q29sb3I%2BQmxhY2s8L1RleHRDb2xvcj48Rm9udD48U2l6ZT4xMDwvU2l6ZT48L0ZvbnQ%2BPEhvcml6b250YWxBbGlnbm1lbnQ%2BQ2VudGVyPC9Ib3Jpem9udGFsQWxpZ25tZW50PjwvQW55SGVhZGVyQ2VsbD48L0FwcGVhcmFuY2U%2BPC9HcmlkR3JvdXBpbmdMb29rQW5kRmVlbD4F5Qw8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJ1dGYtMTYiPz48R3JpZEVuZ2luZSB4bWxuczp4c2Q9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hIiB4bWxuczp4c2k9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIj48SXNEeW5hbWljRGF0YT5mYWxzZTwvSXNEeW5hbWljRGF0YT48VGFibGVEZXNjcmlwdG9yPjxBbGxvd05ldz5mYWxzZTwvQWxsb3dOZXc%2BPEFsbG93RWRpdD5mYWxzZTwvQWxsb3dFZGl0PjxBcHBseUxpbWl0ZWRTdHlsZXM%2BZmFsc2U8L0FwcGx5TGltaXRlZFN0eWxlcz48Q29sdW1ucz48R3JpZENvbHVtbkRlc2NyaXB0b3I%2BPE5hbWU%2BVGl0bGU8L05hbWU%2BPFdpZHRoPjIxMjwvV2lkdGg%2BPE1hcHBpbmdOYW1lPlRpdGxlPC9NYXBwaW5nTmFtZT48QXBwZWFyYW5jZT48Q29sdW1uSGVhZGVyQ2VsbD48Q3NzQ2xhc3M%2BInBhcnREZXRhaWxHcmlkSGVhZGVyIjwvQ3NzQ2xhc3M%2BPC9Db2x1bW5IZWFkZXJDZWxsPjwvQXBwZWFyYW5jZT48L0dyaWRDb2x1bW5EZXNjcmlwdG9yPjxHcmlkQ29sdW1uRGVzY3JpcHRvcj48TmFtZT5EYXRhPC9OYW1lPjxXaWR0aD4yMTI8L1dpZHRoPjxNYXBwaW5nTmFtZT5EYXRhPC9NYXBwaW5nTmFtZT48QXBwZWFyYW5jZT48Q29sdW1uSGVhZGVyQ2VsbD48Q3NzQ2xhc3M%2BInBhcnREZXRhaWxHcmlkSGVhZGVyIjwvQ3NzQ2xhc3M%2BPC9Db2x1bW5IZWFkZXJDZWxsPjwvQXBwZWFyYW5jZT48L0dyaWRDb2x1bW5EZXNjcmlwdG9yPjwvQ29sdW1ucz48RWRpdEZvcm1TZXR0aW5ncyAvPjxTb3J0VXBJbWFnZT4vcHVyb2xhdG9yX2xvb2t1cF9wcm9mZXNzaW9uYWwvV2ViUmVzb3VyY2UuYXhkP2Q9OW0wVkZXaWZXV2xIbkhiaWY2TlFhcmtsbE9ld3k5VDVySWNOSkxkVG9qSXAzTl9VQ2dEekc5Sm8tNnRhQlNPVlZRSEF0elRsUWVCQkxHZ1RaZmdBblJaajZiVExpOFdFdzF4allMaHVId2d2bFhGTndGcFR3ekhJaW5Ma0ZYeFc2ZjhIdExxM2piUzNTaVBFZHR3VXV0ZmtzVEF3cGw4ZEh5LTdCZllmZFBBSTl3RFZoUGZZcU9hZG1qV3B5MkZEMzhBdkd3SUhrTmExeWoxZThVWG5VZzImYW1wO3Q9NjM1ODE4OTIzMjk4NTE3MDAwPC9Tb3J0VXBJbWFnZT48U29ydERvd25JbWFnZT4vcHVyb2xhdG9yX2xvb2t1cF9wcm9mZXNzaW9uYWwvV2ViUmVzb3VyY2UuYXhkP2Q9WHhzLTJNVjJWY1ItSjBnZ1VCX1JodkFmSm9KYTdlU1VPeXZuR21IVlpCbnZ5ejl5REhsNlQyNDFIdUk3SVVPVUwzUDZVRGRzb1lzYnZSdEZFaUpNLXJYRjVUN2hzblZVblBuZXZxbnRMOEQzUk1fVUQ1c1hjWU55SHBsMlNjbk9jZ2h4R09OVTY5TlhPMVIyTUlLVGgzUEluYjhCa1AzYl9fUG90TVZxMU1CaE0zZm5mMGEwdlNWelpIdFAyNy1Pd0ltdmRJLXQyUU5YNjI3V2ppWnljdzImYW1wO3Q9NjM1ODE4OTIzMjk4NTE3MDAwPC9Tb3J0RG93bkltYWdlPjwvVGFibGVEZXNjcmlwdG9yPjxBcHBlYXJhbmNlPjxBbnlIZWFkZXJDZWxsPjxJbnRlcmlvcj5Tb2xpZDsgV2hpdGU8L0ludGVyaW9yPjxUZXh0Q29sb3I%2BQmxhY2s8L1RleHRDb2xvcj48Rm9udD48U2l6ZT4xMDwvU2l6ZT48L0ZvbnQ%2BPEhvcml6b250YWxBbGlnbm1lbnQ%2BQ2VudGVyPC9Ib3Jpem9udGFsQWxpZ25tZW50PjwvQW55SGVhZGVyQ2VsbD48L0FwcGVhcmFuY2U%2BPC9HcmlkRW5naW5lPhQrAAMoKVlTeXN0ZW0uSW50NjQsIG1zY29ybGliLCBWZXJzaW9uPTQuMC4wLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49Yjc3YTVjNTYxOTM0ZTA4OQMxMzVkZBQrAAMUKwACZxQrAABoZBYCZg9kFgJmDw8WBh4FV2lkdGgbAAAAAACQekABAAAAHwQbAAAAAAAAWUAHAAAAHwUCgANkZA%3D%3D&__VIEWSTATE=WTBcUnsp8dco0pUP06q7IPJcPAsU%2BuyjW1slViyDaB%2F%2BRhlNnaqEOsezCQdpS9UU6QZdIFhChjrhbFVD4EZmS8xcG7O8WMb9T8IuDUXCBRhkuCVXX9LQupSMLUW8ELO8RdWyZfgCid4o4aBqRLS0z8%2BQmJ3RRvT5IklbOW%2FMnXzMPgWcJP%2FcD2Pq5UtcMriweRR9OKI%2Br%2F4SXwB%2FQAgSsK1VXoP%2F2Tyh%2Bmp%2FFCacldBmZnAQbNB57i6OodKouGwLTiNzmm%2FUNfhcFk0wGGDJC4vQQhWGmOS3NoeLfwKj%2Bu1a4JqzxJFKofZyrnJajLXQ%2FA%2BmtPg8oy6FhRLPkM6WfwfUGUW4s50Dn4yIcSEqm6PqrbWgwsX6gUAYlT4SFTeT8uRrrwF2YpeC52ScTgGUrXVrOgAMqfGTb3tg23nGpWQzePpxaTHjcJS1qL0imq%2FjdddOfBKse5ofqzIiWrtm0cWS%2FjtVOqyxB8zQAU1QpsA2cFXgxa%2FHq3UVElZP9boSndUsPSMSwD2RY0oKJIVBKY0OAOUa%2F8BIOD8En%2FXneAsBP%2FJNB2NgYgWmuCFJHK2hcKmncS5Wwn0Soq2SAzMOjAW0RleEPmethSgLxQiNwPFJ4RAbdGXSp37y2mD5M8uIHFXAr%2B5uImsDjqQ1DhaEGhbjcLAfNTXQQR250hcvNkpZH8C1zIajn9R2EEDw08X4D3v0EsOsQYBU05zRvXFk9tqTTt3%2FP8M9xpM%2FDh2Bu7G8cJVIQ5aD69Gud0zfVgwC6%2FFsGGyOFVQYie5zp%2B5vbmGxRVngOpX3nF2RSknx%2BM%2BHh7TSsKxEFO1rNhEfVwXJ7LO6UDpAcJfiHMplWGXYpMRvuxTTgd1aplpxY4ZWtMUlqc%2Fg4XjrLE90iyyltKVB%2BbZMI7jbwKPuM1hZmljMN3i0gDv%2BNmXXn9dIui6vc7okCDKv8vOws2qCGusDbe83qOdgC1fUngtZNGd2Fj4axHThWp11YhPDOdQ9K%2B40lknWA3IhDTzH%2F92OwUOXcfpJLWghhoUN0D%2FId82%2BUDz%2FAErl5aiBbznfho9%2BvfK69rWVYJZYDkEANbVEDktiIJ1lo0neM1w9vrMS2yAvzgrZokemZxs9VT0myIcy6tROb8lOh6ef78jm8ZT8YvDzXWeYF3Tg%2BJR2ZTQlQlCW65SvfkBq%2Bbm0F9fRHEttPQgrZo1duE1cQpvykpYwwpQAtNMLEC2eNE5QYYM23mlqeHxnh%2B5wr208glRGFD09w%2B3%2BNRwaU%2FuZeSz%2BzUmAuL%2BqWwr%2FUmQF7VPl9ewJr9T8a8QLSiR8WzJCgoaP%2BcCNgOGNR8SWi3KyYIgcdwDeGVJSDG36RzuJyiD8wVVN28qLVFaqMwMtDQG6xpBoDcTGQuVT5uNo1Q0iZYQW7mWvULU2RInWw0YV4oDxLzkapwyyzYA35U%2F1KbMk50FVEhBnMZZFB2JAjH%2BnCPGs3xeKLbhlnAps6EuIemJldpZ8rgHzAUMHAZYQYOPcOcHz82D1126fegtUso1ICxmutxQFg%2BxLpXlwzGTLh%2Fvy2a8k9NNv0NcjK9KiF6SrTlE5scWVON7G8EYEPVwj%2FtSxt87Wp9XuS%2BM67mLKtSOwPG9RHVsmiCkmyTnpvERf9dg%2FWRRNJTP9qJaa%2FdLE4UQ0QIPxWKAzrVmEDY6ahnZrASOXHdNdxovkj%2F5a%2B4WcH6ZYLOZluazK6qjFrruL8mGBlDLOSMfxF7QRX9KExXUKa5wjYEnLE4e9urELXu6IlKf94HGrm3dmyj3X%2BLCmtw%2BTYrO0dEV7xApCc2CTOWCGsgF0hkZgsc1gZMPTVWx%2BhQTNCJ064qT3FA2uzGxipMYNtbG05L5VdePMv0Hnc4%2FCkQyceVwvD%2Fc4abB7sdj%2BFhPet3%2FXg3iXpj5MNG3dHAf0hOkYzFBUOnuxN4uNwR2gZq9rJcRtfyJgj0Ea8J45xLNxNXwEmHMDhHEAmxARgqJ9WSsI68aZkzP%2BL98%2F1wNSzKjEzFQCa0Hjr8s%2FbtDmmcXf2EbVBdqPq53faIbCpoKFfRPWVW4oPf%2FrYRdyD3clddvPtAnh34z68S1hJznZkMvQiLjip%2BeQlXhO1ZB8g7PThCGu8C8ewFkz46iqpvG5TTDZxWUT1lNDwQIPK0%2B19o2kkgUKpckBLXAdJJYhyMpvy09cEWUttiSLftEiOb%2FRnVFaJboC%2B8LEgnAlectpRt9H6aDiEcd1ADxgXsh6ur2ViojRo2o3OxSRC8okHe9lkfrKoWLRIk3TjzyonyHl%2BAY%2BRRHe%2FYAzvhWuYpSKbuNPik5I0ChkFPYLA8UD66Y1y9LPrmXxcgbbxwxHY83Z3VkehmgSIZE467tVbR935pBEPWUshIO3TEBmFpg92i9p4MuUd7GKUBCCgnKrExJwQIFjdbszP7LiHemlYum6%2F6Y7G5x1J9H2Yfsk8GPF43ghn9hTwQctganLVcNq596icAZ5lTwMV59zbDIkN0sro%2FpeU3i1ZvKr0cZ2SvUHUlxKlyR0ZYWIKe5dZTzA4S6RASvfGzUS9gfrf5AUagEqfw%2Bhwt6IJvCLM5MxTtQ%2BZQ3pAqdhKJwbL%2B8LOfuugvHRI9smpxiBaqHsL2sjZJCOW1YG5O8YboAWx2OWpqLliT%2ByXZ8mVppFnZv0QQdrB7Mi5KWULi6srJqjhZZhLkHbPXODgBA4pSgLsHK9wxmFgLDDpEzLtwxdZTEYqkij6Hwq67cPHxdz9A6%2BIEfeL0nxLhPBeu6eK%2B%2F3pyT6aSjngWVKjUhktjVt2jA45g4AvxNGRShP0UJU1Z0XTHXwzQPU5C%2F8jB2AZLRJwLMK5%2BWwlRgkUXz%2BtObfk8M9YnNYaGYrKz1ZG1APO0y1YHCJryMjAbFtE68s45FgGwDrLBk1osRHl1%2F9nfzZ35T9EpEZ4i%2FhingngYDkQER6ATCsMrMbJPsV9YBGD5OsFtsqmaQFbYeW7uYEd9VeF6uM4teycu4QMbbgawWTYwD6t%2FHVRlSrVkw%2FfdE4jqQQQxX6sbooPFeEkGZIo7NnV8O6kVwDsN7FyZ6ljmValL2t8VjizzHbwLr4cCUBE%2Fxh%2B34B7huE6ngPMJZBD8rPxn6vLgop30zCE286rM8GXdlm8f4x1S%2FGNjV7hcvycQQ3R4QxnMMmMvKMFQp3T6DU9j61U1o1H2VxQMleycI9sOQIsB12uq87zLIzDdKkLM%2FDMxwg136ygU%2FEs9nrz2zV5zuI148zRIpbu5BDLttWmQQS3qzwUI6fkawEEdf38iCuI0PnES7qROcoHTbAy9BGog29OWB0HHj03F%2FzdAmLVBjylqt4FeQbWY3S1hl6JufVUP7yqZHfrofpdUS5QifIhUJgif1idmLvVjxRQyHhJsCPlyc3LQxH7vzjOaJStUXuXsUJwQLiP4bA6qq2xV3VoGl31gAMolnAGboY25C7%2BK5cHXk07EEu%2FkeP8h0go1UCctO3fnhgZ3g2q5KPjsXE5Q63UGykSft60wa2ynoKKva6%2BjRzbOl1li%2FCewtFn6in%2FH%2Bj7Uvg13WcGcQf4cFwNagqQ9NGv4sa2Mw0jliQBg0esY4csQm%2BOLHwN5sTnivXHdvlTuNPK1VXlYZa5I3nZuQ3kRFUGvzHjefjFLp1t1aGAzNgzdVKCYTSho0fP7tcg3lpQ3JjCjNz%2Bv%2FcjIneCFWZC3zCMyzgnX%2FPWeKyQoBinJCfo5%2FFJORuU2WfscN4mxAziN227uBKwwG%2FUORRKolswyrI031VrdxEmwGlxYVKlIpODiD6ls%2BuIWddItkuxOUYKZq36cRXOZUSwuihTyMmJHyDDTD55rPtir69XBXYZGieG5WUhUYSBLBMdoxnKIYeqVXa47jKeToN8eKtyqfFlkfXwpAGe%2FmCMMbVql0JsVd1c%2B2N3JXig0Tofhd%2ByYiQOa7es1MfLjmrixaldETVevpBfqNavhTX1sQSeIoVim%2FUdo%2B1%2FxuxUTrCgPt93z%2BbXmNLehPRGQpkI32o5nWsK%2FwB1hF%2FZOrXzcl6O%2BX6YQGMAw2tSyWUT9voPNvsifK6gwLX3uPmRSSTvAS15um94jkEN5ep%2FTsOjwhSqJ93RQ2OHglXyCUsiQgChhOPey4tGYmsJJ%2F8iNVEu59A8OBMnh8elgiXWvgzuacIXPIkd%2FmLuK4uVDBQKEdq%2Bfebjvp%2FFYW%2B1jo%2FmQq48XOqHvxUCvek9riRZNrW4cMOBo8ZX0e6mdWEGaLWrM9P5e9lwl%2F4xlNHKpkLlheEifv6kWxlME2ZytXrf52DBGPqKqyv%2B4W3b8JaEFQSKXEvNceC0OLQXXlPUum5zqib4OZ48VfULlRUMLc%2BobdAI%2FEviq75JyIMlyJGH6tyeaMvAO1XhKqZWv4F204yKDN0dtg1DjGayFXh3fzEZfjijkQFvvbLVlC%2FX8K9XM6Z4nLlplyfTxcvx8NYbnQR%2Bfg62cF%2FDGk2Og%3D%3D&__VIEWSTATEGENERATOR=24DFC6A8&__EVENTVALIDATION=NAmZjLDktl7BWUrlzN37lfeMj31EJHVnVlOS%2FyYfspQnFPR%2F8kfsM4jFtoTxrY%2FTtSPyljs90xrK8t65sA4UP1oxW12SctaymgmVj6S7uqgw0Xz5Nzs1S%2FRD%2FLiChLyh4OWg%2FadxPA5sP3jRXO6Uah0VbX8hsBm8WAzRk%2Fa2UrkfQzgfra%2BAiUFSgmgNsGam8I7QLoLMFTij7UgNUKDrtoz4gsIhVl%2FqNiGX4BWBlrY%3D&TextBoxMainPartNumber=85515&GridPartDetialsCurrentRow=&GridPartDetialsShiftPressed=&GridPartDetialsCtrlPressed=&GridPartDetialsSelectedRows=&GridPartDetialsUnSelectedRows=&GridPartDetialsResizedColumns=&GridPartDetialsDataSourceID=&GridPartDetialsDataMember=&GridPartDetialsHiddenColState=&GridPartDetials_HiddenEEUpdateList=&GridPartDetialsXXtablescrollerXXVerticalPosition=&GridPartDetialsXXtablescrollerXXHorizontalPosition=&WindowPartDetail_Offset=550_450&__ASYNCPOST=true&ButtonMainSearch=Continue'

# def getFilter(filter_number, brand, full=False, ftype='OIL'):
#     brand_names, filter_number = format_brand('purolator',
#                                              brand,
#                                              filter_number)

#     new_address = 'http://www.pureoil.com/purolator_lookup_professional/FilterFinderSearch.aspx'

#     headers = {'X-Requested-With': 'XMLHttpRequest',
#                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'}
#     data = {
#         'ScriptManager1': 'UpdatePanelMainSearch%7CButtonMainSearch',
#         'WindowPartDetail_HIDDENFIELD': '%2FwEPDxYCHh5TRl9FbmFibGVyQ2FsbGJhY2tDb250cm9sU3RhdGUFCC93RVhBQT09ZBYCAgIPZBYCAgEPFCsABQ8WCh4KRGF0YVNvdXJjZWQeDVNMVGFibGVTb3VyY2UXAB4NU291cmNlTGlzdFNldAUgWTJCa1lHRDREd1FnR2dUWVFRd21KaWdQUkROeEF3QT0eBkhlaWdodBsAAAAAAABZQAcAAAAeBF8hU0ICgAFkBf8CPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTE2Ij8%2BPEdyaWRHcm91cGluZ0xvb2tBbmRGZWVsIHhtbG5zOnhzZD0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiPjxBcHBlYXJhbmNlPjxBbnlIZWFkZXJDZWxsPjxJbnRlcmlvcj5Tb2xpZDsgV2hpdGU8L0ludGVyaW9yPjxUZXh0Q29sb3I%2BQmxhY2s8L1RleHRDb2xvcj48Rm9udD48U2l6ZT4xMDwvU2l6ZT48L0ZvbnQ%2BPEhvcml6b250YWxBbGlnbm1lbnQ%2BQ2VudGVyPC9Ib3Jpem9udGFsQWxpZ25tZW50PjwvQW55SGVhZGVyQ2VsbD48L0FwcGVhcmFuY2U%2BPC9HcmlkR3JvdXBpbmdMb29rQW5kRmVlbD4F5Qw8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJ1dGYtMTYiPz48R3JpZEVuZ2luZSB4bWxuczp4c2Q9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hIiB4bWxuczp4c2k9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIj48SXNEeW5hbWljRGF0YT5mYWxzZTwvSXNEeW5hbWljRGF0YT48VGFibGVEZXNjcmlwdG9yPjxBbGxvd05ldz5mYWxzZTwvQWxsb3dOZXc%2BPEFsbG93RWRpdD5mYWxzZTwvQWxsb3dFZGl0PjxBcHBseUxpbWl0ZWRTdHlsZXM%2BZmFsc2U8L0FwcGx5TGltaXRlZFN0eWxlcz48Q29sdW1ucz48R3JpZENvbHVtbkRlc2NyaXB0b3I%2BPE5hbWU%2BVGl0bGU8L05hbWU%2BPFdpZHRoPjIxMjwvV2lkdGg%2BPE1hcHBpbmdOYW1lPlRpdGxlPC9NYXBwaW5nTmFtZT48QXBwZWFyYW5jZT48Q29sdW1uSGVhZGVyQ2VsbD48Q3NzQ2xhc3M%2BInBhcnREZXRhaWxHcmlkSGVhZGVyIjwvQ3NzQ2xhc3M%2BPC9Db2x1bW5IZWFkZXJDZWxsPjwvQXBwZWFyYW5jZT48L0dyaWRDb2x1bW5EZXNjcmlwdG9yPjxHcmlkQ29sdW1uRGVzY3JpcHRvcj48TmFtZT5EYXRhPC9OYW1lPjxXaWR0aD4yMTI8L1dpZHRoPjxNYXBwaW5nTmFtZT5EYXRhPC9NYXBwaW5nTmFtZT48QXBwZWFyYW5jZT48Q29sdW1uSGVhZGVyQ2VsbD48Q3NzQ2xhc3M%2BInBhcnREZXRhaWxHcmlkSGVhZGVyIjwvQ3NzQ2xhc3M%2BPC9Db2x1bW5IZWFkZXJDZWxsPjwvQXBwZWFyYW5jZT48L0dyaWRDb2x1bW5EZXNjcmlwdG9yPjwvQ29sdW1ucz48RWRpdEZvcm1TZXR0aW5ncyAvPjxTb3J0VXBJbWFnZT4vcHVyb2xhdG9yX2xvb2t1cF9wcm9mZXNzaW9uYWwvV2ViUmVzb3VyY2UuYXhkP2Q9OW0wVkZXaWZXV2xIbkhiaWY2TlFhcmtsbE9ld3k5VDVySWNOSkxkVG9qSXAzTl9VQ2dEekc5Sm8tNnRhQlNPVlZRSEF0elRsUWVCQkxHZ1RaZmdBblJaajZiVExpOFdFdzF4allMaHVId2d2bFhGTndGcFR3ekhJaW5Ma0ZYeFc2ZjhIdExxM2piUzNTaVBFZHR3VXV0ZmtzVEF3cGw4ZEh5LTdCZllmZFBBSTl3RFZoUGZZcU9hZG1qV3B5MkZEMzhBdkd3SUhrTmExeWoxZThVWG5VZzImYW1wO3Q9NjM1ODE4OTIzMjk4NTE3MDAwPC9Tb3J0VXBJbWFnZT48U29ydERvd25JbWFnZT4vcHVyb2xhdG9yX2xvb2t1cF9wcm9mZXNzaW9uYWwvV2ViUmVzb3VyY2UuYXhkP2Q9WHhzLTJNVjJWY1ItSjBnZ1VCX1JodkFmSm9KYTdlU1VPeXZuR21IVlpCbnZ5ejl5REhsNlQyNDFIdUk3SVVPVUwzUDZVRGRzb1lzYnZSdEZFaUpNLXJYRjVUN2hzblZVblBuZXZxbnRMOEQzUk1fVUQ1c1hjWU55SHBsMlNjbk9jZ2h4R09OVTY5TlhPMVIyTUlLVGgzUEluYjhCa1AzYl9fUG90TVZxMU1CaE0zZm5mMGEwdlNWelpIdFAyNy1Pd0ltdmRJLXQyUU5YNjI3V2ppWnljdzImYW1wO3Q9NjM1ODE4OTIzMjk4NTE3MDAwPC9Tb3J0RG93bkltYWdlPjwvVGFibGVEZXNjcmlwdG9yPjxBcHBlYXJhbmNlPjxBbnlIZWFkZXJDZWxsPjxJbnRlcmlvcj5Tb2xpZDsgV2hpdGU8L0ludGVyaW9yPjxUZXh0Q29sb3I%2BQmxhY2s8L1RleHRDb2xvcj48Rm9udD48U2l6ZT4xMDwvU2l6ZT48L0ZvbnQ%2BPEhvcml6b250YWxBbGlnbm1lbnQ%2BQ2VudGVyPC9Ib3Jpem9udGFsQWxpZ25tZW50PjwvQW55SGVhZGVyQ2VsbD48L0FwcGVhcmFuY2U%2BPC9HcmlkRW5naW5lPhQrAAMoKVlTeXN0ZW0uSW50NjQsIG1zY29ybGliLCBWZXJzaW9uPTQuMC4wLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49Yjc3YTVjNTYxOTM0ZTA4OQMxMzVkZBQrAAMUKwACZxQrAABoZBYCZg9kFgJmDw8WBh4FV2lkdGgbAAAAAACQekABAAAAHwQbAAAAAAAAWUAHAAAAHwUCgANkZA%3D%3D',
#         '__VIEWSTATE': 'WTBcUnsp8dco0pUP06q7IPJcPAsU%2BuyjW1slViyDaB%2F%2BRhlNnaqEOsezCQdpS9UU6QZdIFhChjrhbFVD4EZmS8xcG7O8WMb9T8IuDUXCBRhkuCVXX9LQupSMLUW8ELO8RdWyZfgCid4o4aBqRLS0z8%2BQmJ3RRvT5IklbOW%2FMnXzMPgWcJP%2FcD2Pq5UtcMriweRR9OKI%2Br%2F4SXwB%2FQAgSsK1VXoP%2F2Tyh%2Bmp%2FFCacldBmZnAQbNB57i6OodKouGwLTiNzmm%2FUNfhcFk0wGGDJC4vQQhWGmOS3NoeLfwKj%2Bu1a4JqzxJFKofZyrnJajLXQ%2FA%2BmtPg8oy6FhRLPkM6WfwfUGUW4s50Dn4yIcSEqm6PqrbWgwsX6gUAYlT4SFTeT8uRrrwF2YpeC52ScTgGUrXVrOgAMqfGTb3tg23nGpWQzePpxaTHjcJS1qL0imq%2FjdddOfBKse5ofqzIiWrtm0cWS%2FjtVOqyxB8zQAU1QpsA2cFXgxa%2FHq3UVElZP9boSndUsPSMSwD2RY0oKJIVBKY0OAOUa%2F8BIOD8En%2FXneAsBP%2FJNB2NgYgWmuCFJHK2hcKmncS5Wwn0Soq2SAzMOjAW0RleEPmethSgLxQiNwPFJ4RAbdGXSp37y2mD5M8uIHFXAr%2B5uImsDjqQ1DhaEGhbjcLAfNTXQQR250hcvNkpZH8C1zIajn9R2EEDw08X4D3v0EsOsQYBU05zRvXFk9tqTTt3%2FP8M9xpM%2FDh2Bu7G8cJVIQ5aD69Gud0zfVgwC6%2FFsGGyOFVQYie5zp%2B5vbmGxRVngOpX3nF2RSknx%2BM%2BHh7TSsKxEFO1rNhEfVwXJ7LO6UDpAcJfiHMplWGXYpMRvuxTTgd1aplpxY4ZWtMUlqc%2Fg4XjrLE90iyyltKVB%2BbZMI7jbwKPuM1hZmljMN3i0gDv%2BNmXXn9dIui6vc7okCDKv8vOws2qCGusDbe83qOdgC1fUngtZNGd2Fj4axHThWp11YhPDOdQ9K%2B40lknWA3IhDTzH%2F92OwUOXcfpJLWghhoUN0D%2FId82%2BUDz%2FAErl5aiBbznfho9%2BvfK69rWVYJZYDkEANbVEDktiIJ1lo0neM1w9vrMS2yAvzgrZokemZxs9VT0myIcy6tROb8lOh6ef78jm8ZT8YvDzXWeYF3Tg%2BJR2ZTQlQlCW65SvfkBq%2Bbm0F9fRHEttPQgrZo1duE1cQpvykpYwwpQAtNMLEC2eNE5QYYM23mlqeHxnh%2B5wr208glRGFD09w%2B3%2BNRwaU%2FuZeSz%2BzUmAuL%2BqWwr%2FUmQF7VPl9ewJr9T8a8QLSiR8WzJCgoaP%2BcCNgOGNR8SWi3KyYIgcdwDeGVJSDG36RzuJyiD8wVVN28qLVFaqMwMtDQG6xpBoDcTGQuVT5uNo1Q0iZYQW7mWvULU2RInWw0YV4oDxLzkapwyyzYA35U%2F1KbMk50FVEhBnMZZFB2JAjH%2BnCPGs3xeKLbhlnAps6EuIemJldpZ8rgHzAUMHAZYQYOPcOcHz82D1126fegtUso1ICxmutxQFg%2BxLpXlwzGTLh%2Fvy2a8k9NNv0NcjK9KiF6SrTlE5scWVON7G8EYEPVwj%2FtSxt87Wp9XuS%2BM67mLKtSOwPG9RHVsmiCkmyTnpvERf9dg%2FWRRNJTP9qJaa%2FdLE4UQ0QIPxWKAzrVmEDY6ahnZrASOXHdNdxovkj%2F5a%2B4WcH6ZYLOZluazK6qjFrruL8mGBlDLOSMfxF7QRX9KExXUKa5wjYEnLE4e9urELXu6IlKf94HGrm3dmyj3X%2BLCmtw%2BTYrO0dEV7xApCc2CTOWCGsgF0hkZgsc1gZMPTVWx%2BhQTNCJ064qT3FA2uzGxipMYNtbG05L5VdePMv0Hnc4%2FCkQyceVwvD%2Fc4abB7sdj%2BFhPet3%2FXg3iXpj5MNG3dHAf0hOkYzFBUOnuxN4uNwR2gZq9rJcRtfyJgj0Ea8J45xLNxNXwEmHMDhHEAmxARgqJ9WSsI68aZkzP%2BL98%2F1wNSzKjEzFQCa0Hjr8s%2FbtDmmcXf2EbVBdqPq53faIbCpoKFfRPWVW4oPf%2FrYRdyD3clddvPtAnh34z68S1hJznZkMvQiLjip%2BeQlXhO1ZB8g7PThCGu8C8ewFkz46iqpvG5TTDZxWUT1lNDwQIPK0%2B19o2kkgUKpckBLXAdJJYhyMpvy09cEWUttiSLftEiOb%2FRnVFaJboC%2B8LEgnAlectpRt9H6aDiEcd1ADxgXsh6ur2ViojRo2o3OxSRC8okHe9lkfrKoWLRIk3TjzyonyHl%2BAY%2BRRHe%2FYAzvhWuYpSKbuNPik5I0ChkFPYLA8UD66Y1y9LPrmXxcgbbxwxHY83Z3VkehmgSIZE467tVbR935pBEPWUshIO3TEBmFpg92i9p4MuUd7GKUBCCgnKrExJwQIFjdbszP7LiHemlYum6%2F6Y7G5x1J9H2Yfsk8GPF43ghn9hTwQctganLVcNq596icAZ5lTwMV59zbDIkN0sro%2FpeU3i1ZvKr0cZ2SvUHUlxKlyR0ZYWIKe5dZTzA4S6RASvfGzUS9gfrf5AUagEqfw%2Bhwt6IJvCLM5MxTtQ%2BZQ3pAqdhKJwbL%2B8LOfuugvHRI9smpxiBaqHsL2sjZJCOW1YG5O8YboAWx2OWpqLliT%2ByXZ8mVppFnZv0QQdrB7Mi5KWULi6srJqjhZZhLkHbPXODgBA4pSgLsHK9wxmFgLDDpEzLtwxdZTEYqkij6Hwq67cPHxdz9A6%2BIEfeL0nxLhPBeu6eK%2B%2F3pyT6aSjngWVKjUhktjVt2jA45g4AvxNGRShP0UJU1Z0XTHXwzQPU5C%2F8jB2AZLRJwLMK5%2BWwlRgkUXz%2BtObfk8M9YnNYaGYrKz1ZG1APO0y1YHCJryMjAbFtE68s45FgGwDrLBk1osRHl1%2F9nfzZ35T9EpEZ4i%2FhingngYDkQER6ATCsMrMbJPsV9YBGD5OsFtsqmaQFbYeW7uYEd9VeF6uM4teycu4QMbbgawWTYwD6t%2FHVRlSrVkw%2FfdE4jqQQQxX6sbooPFeEkGZIo7NnV8O6kVwDsN7FyZ6ljmValL2t8VjizzHbwLr4cCUBE%2Fxh%2B34B7huE6ngPMJZBD8rPxn6vLgop30zCE286rM8GXdlm8f4x1S%2FGNjV7hcvycQQ3R4QxnMMmMvKMFQp3T6DU9j61U1o1H2VxQMleycI9sOQIsB12uq87zLIzDdKkLM%2FDMxwg136ygU%2FEs9nrz2zV5zuI148zRIpbu5BDLttWmQQS3qzwUI6fkawEEdf38iCuI0PnES7qROcoHTbAy9BGog29OWB0HHj03F%2FzdAmLVBjylqt4FeQbWY3S1hl6JufVUP7yqZHfrofpdUS5QifIhUJgif1idmLvVjxRQyHhJsCPlyc3LQxH7vzjOaJStUXuXsUJwQLiP4bA6qq2xV3VoGl31gAMolnAGboY25C7%2BK5cHXk07EEu%2FkeP8h0go1UCctO3fnhgZ3g2q5KPjsXE5Q63UGykSft60wa2ynoKKva6%2BjRzbOl1li%2FCewtFn6in%2FH%2Bj7Uvg13WcGcQf4cFwNagqQ9NGv4sa2Mw0jliQBg0esY4csQm%2BOLHwN5sTnivXHdvlTuNPK1VXlYZa5I3nZuQ3kRFUGvzHjefjFLp1t1aGAzNgzdVKCYTSho0fP7tcg3lpQ3JjCjNz%2Bv%2FcjIneCFWZC3zCMyzgnX%2FPWeKyQoBinJCfo5%2FFJORuU2WfscN4mxAziN227uBKwwG%2FUORRKolswyrI031VrdxEmwGlxYVKlIpODiD6ls%2BuIWddItkuxOUYKZq36cRXOZUSwuihTyMmJHyDDTD55rPtir69XBXYZGieG5WUhUYSBLBMdoxnKIYeqVXa47jKeToN8eKtyqfFlkfXwpAGe%2FmCMMbVql0JsVd1c%2B2N3JXig0Tofhd%2ByYiQOa7es1MfLjmrixaldETVevpBfqNavhTX1sQSeIoVim%2FUdo%2B1%2FxuxUTrCgPt93z%2BbXmNLehPRGQpkI32o5nWsK%2FwB1hF%2FZOrXzcl6O%2BX6YQGMAw2tSyWUT9voPNvsifK6gwLX3uPmRSSTvAS15um94jkEN5ep%2FTsOjwhSqJ93RQ2OHglXyCUsiQgChhOPey4tGYmsJJ%2F8iNVEu59A8OBMnh8elgiXWvgzuacIXPIkd%2FmLuK4uVDBQKEdq%2Bfebjvp%2FFYW%2B1jo%2FmQq48XOqHvxUCvek9riRZNrW4cMOBo8ZX0e6mdWEGaLWrM9P5e9lwl%2F4xlNHKpkLlheEifv6kWxlME2ZytXrf52DBGPqKqyv%2B4W3b8JaEFQSKXEvNceC0OLQXXlPUum5zqib4OZ48VfULlRUMLc%2BobdAI%2FEviq75JyIMlyJGH6tyeaMvAO1XhKqZWv4F204yKDN0dtg1DjGayFXh3fzEZfjijkQFvvbLVlC%2FX8K9XM6Z4nLlplyfTxcvx8NYbnQR%2Bfg62cF%2FDGk2Og%3D%3D',
#         '__VIEWSTATEGENERATOR': '24DFC6A8',
#         '__EVENTVALIDATION': 'NAmZjLDktl7BWUrlzN37lfeMj31EJHVnVlOS%2FyYfspQnFPR%2F8kfsM4jFtoTxrY%2FTtSPyljs90xrK8t65sA4UP1oxW12SctaymgmVj6S7uqgw0Xz5Nzs1S%2FRD%2FLiChLyh4OWg%2FadxPA5sP3jRXO6Uah0VbX8hsBm8WAzRk%2Fa2UrkfQzgfra%2BAiUFSgmgNsGam8I7QLoLMFTij7UgNUKDrtoz4gsIhVl%2FqNiGX4BWBlrY%3D',
#         'TextBoxMainPartNumber': filter_number,
#         'WindowPartDetail_Offset': '550_450',
#         '__ASYNCPOST': '',
#         'ButtonMainSearch': 'Continue',
#     }
#     resp = post(new_address, data=data, headers=headers)
#     if resp.status_code == 200:
#         soup = BeautifulSoup(resp.text, 'html.parser')
#     else:
#         return ''

#     # print soup.prettify().encode('utf-8')
#     table = soup.find(id='GridResults~OT')
#     if not table:
#         return ''

#     purolators = set()
#     rows = table.find('tbody').find_all('tr')
#     for row in rows[2:]:
#         tds = row.find_all('td')
#         manufacturer = tds[0].getText()
#         manpartnum = tds[1].getText()
#         partnum = tds[2].getText()
#         ptype = tds[3].getText()
#         print manufacturer, manpartnum, partnum
#         if manufacturer == brand:
#             purolators.add(partnum)

#     return ','.join(purolators)


# elems = vals.split('&')
# for e in elems:
#     key, value = e.split('=')
#     print "'%s': '%s'" % (key, value)